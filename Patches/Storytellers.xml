<?xml version="1.0" encoding="utf-8"?>
<Patch> <!-- We don't need a PatchOperationFindMod, as Framework is required -->
	<Operation Class="PatchOperationSequence">
		<operations>
			<!-- Check if modExtensions exists, if not add -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef[not(modExtensions)]</xpath>
				<value>
					<modExtensions />
				</value>
			</li>
			<!-- check if that class exists, if not add - needed for VE storytellers -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef/modExtensions[not(li[@Class="VanillaStorytellersExpanded.StorytellerDefExtension"])]</xpath>
				<value>
						<li Class="VanillaStorytellersExpanded.StorytellerDefExtension" />
				</value>
			</li>
			<!-- Check if storytellerThreat exists, if not add - not every VE storyteller uses this node -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef/modExtensions/li[@Class="VanillaStorytellersExpanded.StorytellerDefExtension"][not(storytellerThreat)]</xpath>
				<value>
					<storytellerThreat />
				</value>
			</li>
			<!-- Finally, apply the damage - I want this to be a mod option scale of 0.10-5.00 -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef/modExtensions/li[@Class="VanillaStorytellersExpanded.StorytellerDefExtension"]/storytellerThreat[not(allDamagesMultiplier)]</xpath>
				<value>
					<allDamagesMultiplier>2</allDamagesMultiplier>
				</value>
			</li>
			<!-- Disable threats at 1 pop - I want this to be a mod option scale of 0-99 -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef/modExtensions/li[@Class="VanillaStorytellersExpanded.StorytellerDefExtension"]/storytellerThreat[not(disableThreatsAtPopulationCount)]</xpath>
				<value>
					<disableThreatsAtPopulationCount>2</disableThreatsAtPopulationCount>
				</value>
			</li>
			<!-- Defines what can trigger upon beating a raid - possible to add mod options to choose more events/disable events? -->
			<li Class="PatchOperationAdd"> 
				<xpath>/Defs/StorytellerDef/modExtensions/li[@Class="VanillaStorytellersExpanded.StorytellerDefExtension"]/storytellerThreat[not(goodIncidents)]</xpath>
				<value>
					<goodIncidents>
						<li>ResourcePodCrash</li>
						<li>PsychicSoothe</li>
						<li>SelfTame</li>
						<li>AmbrosiaSprout</li>
						<li>FarmAnimalsWanderIn</li>
						<li>WandererJoin</li>
						<li>RefugeePodCrash</li>
						<li>ThrumboPasses</li>
						<li>MeteoriteImpact</li>
						<li>WildManWandersIn</li>
					</goodIncidents>
				</value>
			</li>
		</operations>
	</Operation>
</Patch>